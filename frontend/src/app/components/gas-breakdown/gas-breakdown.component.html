<div class="gas-breakdown" *ngIf="gasInfo">
  <h3 class="section-title">Gas Breakdown</h3>

  <div class="box">
    <!-- Progress bar visualization -->
    <div class="gas-bar-container">
      <div class="gas-bar">
        <div class="gas-segment used"
             [style.width.%]="usedPercentage"
             [ngbTooltip]="'Gas Used: ' + formatNumber(gasInfo.gasUsed)"
             placement="top">
        </div>
        <div class="gas-segment refunded"
             [style.width.%]="refundedPercentage"
             [ngbTooltip]="'Refunded: ' + formatNumber(gasInfo.refundedGas)"
             placement="top"
             *ngIf="gasInfo.refundedGas > 0">
        </div>
      </div>
      <div class="gas-labels">
        <span class="label-start">0</span>
        <span class="label-end">{{ formatNumber(gasInfo.estimatedGas || gasInfo.gasUsed) }}</span>
      </div>
    </div>

    <!-- Stats grid -->
    <div class="gas-stats">
      <div class="stat-item">
        <div class="stat-label">Estimated</div>
        <div class="stat-value">{{ formatNumber(gasInfo.estimatedGas) }}</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Used</div>
        <div class="stat-value text-warning">{{ formatNumber(gasInfo.gasUsed) }}</div>
      </div>
      <div class="stat-item" *ngIf="gasInfo.specialGasUsed > 0">
        <div class="stat-label">Special</div>
        <div class="stat-value text-info">{{ formatNumber(gasInfo.specialGasUsed) }}</div>
      </div>
      <div class="stat-item" *ngIf="gasInfo.refundedGas > 0">
        <div class="stat-label">Refunded</div>
        <div class="stat-value text-success">{{ formatNumber(gasInfo.refundedGas) }}</div>
      </div>
    </div>

    <!-- Efficiency indicator -->
    <div class="efficiency-indicator" *ngIf="efficiency > 0">
      <span class="efficiency-label">Efficiency:</span>
      <span class="efficiency-value" [class.high]="efficiency >= 80" [class.medium]="efficiency >= 50 && efficiency < 80" [class.low]="efficiency < 50">
        {{ efficiency | number: '1.1-1' }}%
      </span>
    </div>
  </div>
</div>
